<script src="../../bower_components/page/page.js"></script>
<script>

    window.addEventListener('WebComponentsReady', function() {
        page('/', function() {
            app.route = 'home';
            app.scrollToTop();
        });

        page('/#pricetable', function() {
            app.route = 'home';
            var pricetable = document.querySelector('#pricetable');
            app.smoothScroll(pricetable, 0);
        });

        page('/blog', function() {
            app.route = 'blog';
        });

        page('/blog/:title', function(ctx) {
            app.route = 'blog';
            app.params = ctx.params;
            app.scrollToTop();
        });

        page.exit('/blog/:title', function() {
            document.querySelector('#blog').closePost();
        });

        page('/speakers', function() {
            app.route = 'speakers';
        });

        page('/speakers/:id', function(data) {
            app.route = 'speakers';
            app.params = data.params;
            app.scrollToTop();
        });

        page.exit('/speakers/:id', function() {
//            document.querySelector('#people-block').closePerson();
        });

        page('/schedule', function() {
            app.route = 'schedule';
            app.scrollToTop();
        });
        page('/schedule/:id', function(data) {
            app.route = 'schedule';
            app.params = data.params;
        });

        page('/contact', function() {
            app.route = 'contact';
            app.scrollToTop();
        });

        page('/code-of-conduct', function() {
            app.route = 'code-of-conduct';
            app.scrollToTop();
        });

        page('/speaker-guidelines', function() {
            app.route = 'speaker-guidelines';
            app.scrollToTop();
        });

        page({
            hashbang: true
        });

        function redirectLink(e) {
            page.redirect('/' + this.getAttribute('data-route'));
            e.preventDefault();
        }

        var routerLinks = document.querySelectorAll('a[href^="#!"], a[dynamic-link]');
        for (var i = 0; i < routerLinks.length; i++) {
            routerLinks[i].addEventListener('click', redirectLink, false);
        }
    });
</script>
